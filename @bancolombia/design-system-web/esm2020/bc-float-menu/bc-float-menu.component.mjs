import { Component, EventEmitter, Input, Output } from '@angular/core';
import { BcFloatMenuBehavior } from '@bancolombia/design-system-behaviors';
import * as i0 from "@angular/core";
import * as i1 from "@bancolombia/design-system-web/bc-helpers";
import * as i2 from "@bancolombia/design-system-web/bc-preloader";
import * as i3 from "@angular/common";
export var NumberOfPreloaders;
(function (NumberOfPreloaders) {
    NumberOfPreloaders[NumberOfPreloaders["ONE"] = 1] = "ONE";
    NumberOfPreloaders[NumberOfPreloaders["TWO"] = 2] = "TWO";
    NumberOfPreloaders[NumberOfPreloaders["THREE"] = 3] = "THREE";
    NumberOfPreloaders[NumberOfPreloaders["FOUR"] = 4] = "FOUR";
})(NumberOfPreloaders || (NumberOfPreloaders = {}));
export class BcFloatMenuComponent {
    constructor(bcHelperService) {
        this.bcHelperService = bcHelperService;
        this.componentId = this.bcHelperService.getId(this);
        this.checkbox = false;
        this.radioButtons = false;
        this.options = [];
        this.arrowCenter = false;
        this.arrowLeft = false;
        this.arrowRight = false;
        this.positionRight = false;
        this.positionLeft = false;
        this.selectedIcon = false;
        this.row = null;
        /**
         * Parametro que permite mostrar el preloader
         * @param havePreloader
         * @type boolean
         * @default false
         */
        this.havePreloader = false;
        /**
         * Parametro que permite configurar el ancho del preloader
         * @param floatMenuWidth
         * @type string
         * @default 'default'
         * @description valid values: 'full', 'default'
         * @description 'full' = 100% width
         * @description 'default' = preloader width (100px)
         */
        this.floatMenuWidth = 'default';
        this.onChange = new EventEmitter();
        this.dropdownId = this.bcHelperService.getId(this);
        this.changed = new EventEmitter();
        this.preloaderList = [];
    }
    ngOnInit() {
        this.generatePreloaderList();
    }
    ngAfterViewInit() {
        this.bcFloatMenuBehavior = new BcFloatMenuBehavior();
        this.bcFloatMenuBehavior.setId(this.componentId);
        const element = this.bcFloatMenuBehavior.getMySelf().querySelector(`[class~='bc-float-menu']`);
        this.bcFloatMenuBehavior.setElement(element);
        this.bcFloatMenuBehavior.setUp();
    }
    ngOnChanges(change) {
        const TIMEOUT_MS = 500;
        if (change.options.currentValue.length > 0 && this.havePreloader) {
            BcFloatMenuBehavior.closeAll();
            this.bcFloatMenuBehavior.setUp();
            setTimeout(() => {
                this.bcFloatMenuBehavior.setUp();
            }, TIMEOUT_MS);
        }
    }
    generatePreloaderList() {
        this.preloaderList = Array.from({ length: this.numOfpreloaders }, (_, index) => index + 1);
    }
    selectOption(event, optionId) {
        this.onChange.emit({
            optionSeleted: optionId,
            rowData: this.row ? this.row : null,
            customData: this.data ? this.data : null,
        });
    }
}
BcFloatMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.4.0", ngImport: i0, type: BcFloatMenuComponent, deps: [{ token: i1.BcHelperService }], target: i0.ɵɵFactoryTarget.Component });
BcFloatMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.4.0", type: BcFloatMenuComponent, selector: "bc-float-menu", inputs: { componentId: "componentId", checkbox: "checkbox", radioButtons: "radioButtons", options: "options", arrowCenter: "arrowCenter", arrowLeft: "arrowLeft", arrowRight: "arrowRight", positionRight: "positionRight", positionLeft: "positionLeft", selectedIcon: "selectedIcon", row: "row", data: "data", havePreloader: "havePreloader", numOfpreloaders: "numOfpreloaders", floatMenuWidth: "floatMenuWidth" }, outputs: { onChange: "onChange", changed: "changed" }, usesOnChanges: true, ngImport: i0, template: "<div [id]=\"componentId\">\n  <ng-content></ng-content>\n  <div\n    class=\"bc-float-menu\"\n    id=\"BcDropdown_{{ dropdownId }}\"\n    [ngClass]=\"{\n      'bc-float-menu-arrow-center': arrowCenter,\n      'bc-float-menu-arrow-right': arrowRight,\n      'bc-float-menu-arrow-left': arrowLeft,\n      'bc-float-menu-positon-right': positionRight,\n      'bc-float-menu-positon-left': positionLeft\n    }\"\n    [attr.width]=\"floatMenuWidth\"\n    [attr.aria-angular]=\"true\"\n  >\n    <div\n      *ngIf=\"arrowCenter || arrowRight || arrowLeft\"\n      class=\"bc-float-menu-arrow\"\n    ></div>\n    <section\n      class=\"bc-float-menu-content\"\n      [ngClass]=\"{ 'bc-float-menu-selected-icon': selectedIcon }\"\n      [id]=\"dropdownId\"\n    >\n      <ul>\n        <ng-container\n          *ngIf=\"havePreloader && options.length === 0; else defaultOption\"\n        >\n          <li\n            *ngFor=\"let item of preloaderList\"\n            [attr.aria-disabled]=\"'true'\"\n            [attr.aria-label]=\"'Preloader'\"\n          >\n            <bc-preloader type=\"line\" [width]=\"floatMenuWidth\"></bc-preloader>\n          </li>\n        </ng-container>\n        <ng-template #defaultOption>\n          <li\n            [ngClass]=\"{\n              'bc-float-menu-option-disabled': option.disabled == 'disabled',\n              'bc-float-menu-option': option.disabled != 'disabled'\n            }\"\n            *ngFor=\"let option of options\"\n            (click)=\"selectOption($event, option)\"\n            [attr.aria-disabled]=\"option.disabled ? 'true' : 'false'\"\n          >\n            <img\n              *ngIf=\"option.imagenSrc\"\n              class=\"bc-icon\"\n              src=\"{{ option.imagLeft }}\"\n              alt=\"{{ option.altImg }}\"\n            />\n            <em *ngIf=\"option.iconLeft\" class=\"bc-icon bc-sm\">{{\n              option.iconLeft\n            }}</em>\n            <div *ngIf=\"radioButtons\" class=\"bc-float-menu-inputs\">\n              <div class=\"bc-radio-group\">\n                <label class=\"bc-radio-label\">\n                  <input\n                    class=\"bc-float-menu-input\"\n                    type=\"radio\"\n                    name=\"default\"\n                    value=\"1\"\n                    role=\"radio\"\n                    tabindex=\"0\"\n                    aria-checked=\"false\"\n                    aria-hidden=\"true\"\n                  />\n                  <span class=\"bc-radio\"></span>\n                </label>\n              </div>\n            </div>\n            <div *ngIf=\"checkbox\" class=\"bc-float-menu-inputs\">\n              <label class=\"bc-container-checkbox\">\n                <input\n                  class=\"bc-float-menu-input\"\n                  type=\"checkbox\"\n                  aria-hidden=\"true\"\n                />\n                <span class=\"bc-checkbox\"></span>\n              </label>\n            </div>\n            <a>\n              <span *ngIf=\"option.mainText\" class=\"bc-float-menu-main-text\">{{\n                option.mainText\n              }}</span>\n              <span\n                *ngIf=\"option.secondText\"\n                class=\"bc-float-menu-secondary-text\"\n                >{{ option.secondText }}</span\n              >\n            </a>\n            <em *ngIf=\"option.iconRight\" class=\"bc-icon bc-sm\">{{\n              option.iconRight\n            }}</em>\n            <img\n              *ngIf=\"option.imagRight\"\n              class=\"bc-icon\"\n              [src]=\"option.imagRight\"\n              alt=\"{{ option.altImg }}\"\n            />\n          </li>\n        </ng-template>\n      </ul>\n    </section>\n  </div>\n</div>\n", components: [{ type: i2.BcPreloaderComponent, selector: "bc-preloader", inputs: ["type", "width", "height", "borderRadius"] }], directives: [{ type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.4.0", ngImport: i0, type: BcFloatMenuComponent, decorators: [{
            type: Component,
            args: [{ selector: 'bc-float-menu', template: "<div [id]=\"componentId\">\n  <ng-content></ng-content>\n  <div\n    class=\"bc-float-menu\"\n    id=\"BcDropdown_{{ dropdownId }}\"\n    [ngClass]=\"{\n      'bc-float-menu-arrow-center': arrowCenter,\n      'bc-float-menu-arrow-right': arrowRight,\n      'bc-float-menu-arrow-left': arrowLeft,\n      'bc-float-menu-positon-right': positionRight,\n      'bc-float-menu-positon-left': positionLeft\n    }\"\n    [attr.width]=\"floatMenuWidth\"\n    [attr.aria-angular]=\"true\"\n  >\n    <div\n      *ngIf=\"arrowCenter || arrowRight || arrowLeft\"\n      class=\"bc-float-menu-arrow\"\n    ></div>\n    <section\n      class=\"bc-float-menu-content\"\n      [ngClass]=\"{ 'bc-float-menu-selected-icon': selectedIcon }\"\n      [id]=\"dropdownId\"\n    >\n      <ul>\n        <ng-container\n          *ngIf=\"havePreloader && options.length === 0; else defaultOption\"\n        >\n          <li\n            *ngFor=\"let item of preloaderList\"\n            [attr.aria-disabled]=\"'true'\"\n            [attr.aria-label]=\"'Preloader'\"\n          >\n            <bc-preloader type=\"line\" [width]=\"floatMenuWidth\"></bc-preloader>\n          </li>\n        </ng-container>\n        <ng-template #defaultOption>\n          <li\n            [ngClass]=\"{\n              'bc-float-menu-option-disabled': option.disabled == 'disabled',\n              'bc-float-menu-option': option.disabled != 'disabled'\n            }\"\n            *ngFor=\"let option of options\"\n            (click)=\"selectOption($event, option)\"\n            [attr.aria-disabled]=\"option.disabled ? 'true' : 'false'\"\n          >\n            <img\n              *ngIf=\"option.imagenSrc\"\n              class=\"bc-icon\"\n              src=\"{{ option.imagLeft }}\"\n              alt=\"{{ option.altImg }}\"\n            />\n            <em *ngIf=\"option.iconLeft\" class=\"bc-icon bc-sm\">{{\n              option.iconLeft\n            }}</em>\n            <div *ngIf=\"radioButtons\" class=\"bc-float-menu-inputs\">\n              <div class=\"bc-radio-group\">\n                <label class=\"bc-radio-label\">\n                  <input\n                    class=\"bc-float-menu-input\"\n                    type=\"radio\"\n                    name=\"default\"\n                    value=\"1\"\n                    role=\"radio\"\n                    tabindex=\"0\"\n                    aria-checked=\"false\"\n                    aria-hidden=\"true\"\n                  />\n                  <span class=\"bc-radio\"></span>\n                </label>\n              </div>\n            </div>\n            <div *ngIf=\"checkbox\" class=\"bc-float-menu-inputs\">\n              <label class=\"bc-container-checkbox\">\n                <input\n                  class=\"bc-float-menu-input\"\n                  type=\"checkbox\"\n                  aria-hidden=\"true\"\n                />\n                <span class=\"bc-checkbox\"></span>\n              </label>\n            </div>\n            <a>\n              <span *ngIf=\"option.mainText\" class=\"bc-float-menu-main-text\">{{\n                option.mainText\n              }}</span>\n              <span\n                *ngIf=\"option.secondText\"\n                class=\"bc-float-menu-secondary-text\"\n                >{{ option.secondText }}</span\n              >\n            </a>\n            <em *ngIf=\"option.iconRight\" class=\"bc-icon bc-sm\">{{\n              option.iconRight\n            }}</em>\n            <img\n              *ngIf=\"option.imagRight\"\n              class=\"bc-icon\"\n              [src]=\"option.imagRight\"\n              alt=\"{{ option.altImg }}\"\n            />\n          </li>\n        </ng-template>\n      </ul>\n    </section>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.BcHelperService }]; }, propDecorators: { componentId: [{
                type: Input
            }], checkbox: [{
                type: Input
            }], radioButtons: [{
                type: Input
            }], options: [{
                type: Input
            }], arrowCenter: [{
                type: Input
            }], arrowLeft: [{
                type: Input
            }], arrowRight: [{
                type: Input
            }], positionRight: [{
                type: Input
            }], positionLeft: [{
                type: Input
            }], selectedIcon: [{
                type: Input
            }], row: [{
                type: Input
            }], data: [{
                type: Input
            }], havePreloader: [{
                type: Input
            }], numOfpreloaders: [{
                type: Input
            }], floatMenuWidth: [{
                type: Input
            }], onChange: [{
                type: Output
            }], changed: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmMtZmxvYXQtbWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ19iZHMvYmMtZmxvYXQtbWVudS9iYy1mbG9hdC1tZW51LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL3Byb2plY3RzL25nX2Jkcy9iYy1mbG9hdC1tZW51L2JjLWZsb2F0LW1lbnUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFpQixTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQzdHLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDOzs7OztBQUczRSxNQUFNLENBQU4sSUFBWSxrQkFLWDtBQUxELFdBQVksa0JBQWtCO0lBQzVCLHlEQUFPLENBQUE7SUFDUCx5REFBTyxDQUFBO0lBQ1AsNkRBQVMsQ0FBQTtJQUNULDJEQUFRLENBQUE7QUFDVixDQUFDLEVBTFcsa0JBQWtCLEtBQWxCLGtCQUFrQixRQUs3QjtBQU1ELE1BQU0sT0FBTyxvQkFBb0I7SUE2Qy9CLFlBQW9CLGVBQWdDO1FBQWhDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQTNDM0MsZ0JBQVcsR0FBVyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2RCxhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGlCQUFZLEdBQVksS0FBSyxDQUFDO1FBQzlCLFlBQU8sR0FBbUIsRUFBRSxDQUFDO1FBQzdCLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBQzdCLGNBQVMsR0FBWSxLQUFLLENBQUM7UUFDM0IsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixrQkFBYSxHQUFZLEtBQUssQ0FBQztRQUMvQixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUM5QixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUM5QixRQUFHLEdB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O3NCQUF2QixLQUFLO2dCQVVHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0ksUUFBUTtzQkFBakIsTUFBTTtnQkFFRyxPQUFPO3NCQUFoQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmNGbG9hdE1lbnVCZWhhdmlvciB9IGZyb20gJ0BiYW5jb2xvbWJpYS9kZXNpZ24tc3lzdGVtLWJlaGF2aW9ycyc7XG5pbXBvcnQgeyBCY0hlbHBlclNlcnZpY2UgfSBmcm9tICdAYmFuY29sb21iaWEvZGVzaWduLXN5c3RlbS13ZWIvYmMtaGVscGVycyc7XG5cbmV4cG9ydCBlbnVtIE51bWJlck9mUHJlbG9hZGVycyB7XG4gIE9ORSA9IDEsXG4gIFRXTyA9IDIsXG4gIFRIUkVFID0gMyxcbiAgRk9VUiA9IDQsXG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JjLWZsb2F0LW1lbnUnLFxuICB0ZW1wbGF0ZVVybDogJy4vYmMtZmxvYXQtbWVudS5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIEJjRmxvYXRNZW51Q29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25Jbml0IHtcbiAgYmNGbG9hdE1lbnVCZWhhdmlvcjogQmNGbG9hdE1lbnVCZWhhdmlvcjtcbiAgQElucHV0KCkgY29tcG9uZW50SWQ6IHN0cmluZyA9IHRoaXMuYmNIZWxwZXJTZXJ2aWNlLmdldElkKHRoaXMpO1xuICBASW5wdXQoKSBjaGVja2JveDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSByYWRpb0J1dHRvbnM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgb3B0aW9uczogQXJyYXk8T3B0aW9ucz4gPSBbXTtcbiAgQElucHV0KCkgYXJyb3dDZW50ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgYXJyb3dMZWZ0OiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIGFycm93UmlnaHQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgcG9zaXRpb25SaWdodDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBwb3NpdGlvbkxlZnQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgc2VsZWN0ZWRJY29uOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIHJvdzogYW55ID0gbnVsbDtcbiAgQElucHV0KCkgZGF0YTogYW55O1xuICAvKipcbiAgICogUGFyYW1ldHJvIHF1ZSBwZXJtaXRlIG1vc3RyYXIgZWwgcHJlbG9hZGVyXG4gICAqIEBwYXJhbSBoYXZlUHJlbG9hZGVyXG4gICAqIEB0eXBlIGJvb2xlYW5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIEBJbnB1dCgpIGhhdmVQcmVsb2FkZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLyoqXG4gICAqIFBhcmFtZXRybyBxdWUgcGVybWl0ZSBjb25maWd1cmFyIGVsIG51bWVybyBkZSBwcmVsb2FkZXJcbiAgICogQHBhcmFtIG51bU9mcHJlbG9hZGVyc1xuICAgKiBAdHlwZSBudW1iZXJcbiAgICogQGRlZmF1bHQgMVxuICAgKiBAZGVzY3JpcHRpb24gdmFsaWQgdmFsdWVzOiAxLCAyLCAzLCA0XG4gICAqL1xuICBASW5wdXQoKSBudW1PZnByZWxvYWRlcnM6IE51bWJlck9mUHJlbG9hZGVycztcbiAgLyoqXG4gICAqIFBhcmFtZXRybyBxdWUgcGVybWl0ZSBjb25maWd1cmFyIGVsIGFuY2hvIGRlbCBwcmVsb2FkZXJcbiAgICogQHBhcmFtIGZsb2F0TWVudVdpZHRoXG4gICAqIEB0eXBlIHN0cmluZ1xuICAgKiBAZGVmYXVsdCAnZGVmYXVsdCdcbiAgICogQGRlc2NyaXB0aW9uIHZhbGlkIHZhbHVlczogJ2Z1bGwnLCAnZGVmYXVsdCdcbiAgICogQGRlc2NyaXB0aW9uICdmdWxsJyA9IDEwMCUgd2lkdGhcbiAgICogQGRlc2NyaXB0aW9uICdkZWZhdWx0JyA9IHByZWxvYWRlciB3aWR0aCAoMTAwcHgpXG4gICAqL1xuICBASW5wdXQoKSBmbG9hdE1lbnVXaWR0aDogJ2Z1bGwnIHwgJ2RlZmF1bHQnID0gJ2RlZmF1bHQnO1xuICBAT3V0cHV0KCkgb25DaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBkcm9wZG93bklkID0gdGhpcy5iY0hlbHBlclNlcnZpY2UuZ2V0SWQodGhpcyk7XG4gIEBPdXRwdXQoKSBjaGFuZ2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBwcmVsb2FkZXJMaXN0OiBBcnJheTxudW1iZXI+ID0gW11cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJjSGVscGVyU2VydmljZTogQmNIZWxwZXJTZXJ2aWNlKSB7IH1cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5nZW5lcmF0ZVByZWxvYWRlckxpc3QoKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLmJjRmxvYXRNZW51QmVoYXZpb3IgPSBuZXcgQmNGbG9hdE1lbnVCZWhhdmlvcigpO1xuICAgIHRoaXMuYmNGbG9hdE1lbnVCZWhhdmlvci5zZXRJZCh0aGlzLmNvbXBvbmVudElkKTtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5iY0Zsb2F0TWVudUJlaGF2aW9yLmdldE15U2VsZigpLnF1ZXJ5U2VsZWN0b3IoYFtjbGFzc349J2JjLWZsb2F0LW1lbnUnXWApO1xuICAgIHRoaXMuYmNGbG9hdE1lbnVCZWhhdmlvci5zZXRFbGVtZW50KGVsZW1lbnQpO1xuICAgIHRoaXMuYmNGbG9hdE1lbnVCZWhhdmlvci5zZXRVcCgpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgY29uc3QgVElNRU9VVF9NUyA9IDUwMDtcbiAgICBpZiAoY2hhbmdlLm9wdGlvbnMuY3VycmVudFZhbHVlLmxlbmd0aCA+IDAgJiYgdGhpcy5oYXZlUHJlbG9hZGVyKSB7XG4gICAgICBCY0Zsb2F0TWVudUJlaGF2aW9yLmNsb3NlQWxsKCk7XG4gICAgICB0aGlzLmJjRmxvYXRNZW51QmVoYXZpb3Iuc2V0VXAoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmJjRmxvYXRNZW51QmVoYXZpb3Iuc2V0VXAoKTtcbiAgICAgIH0sIFRJTUVPVVRfTVMpO1xuICAgIH1cbiAgfVxuICBnZW5lcmF0ZVByZWxvYWRlckxpc3QoKSB7XG4gICAgdGhpcy5wcmVsb2FkZXJMaXN0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogdGhpcy5udW1PZnByZWxvYWRlcnMgfSwgKF8sIGluZGV4KSA9PiBpbmRleCArIDEpO1xuICB9XG5cbiAgc2VsZWN0T3B0aW9uKGV2ZW50LCBvcHRpb25JZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZS5lbWl0KHtcbiAgICAgIG9wdGlvblNlbGV0ZWQ6IG9wdGlvbklkLFxuICAgICAgcm93RGF0YTogdGhpcy5yb3cgPyB0aGlzLnJvdyA6IG51bGwsXG4gICAgICBjdXN0b21EYXRhOiB0aGlzLmRhdGEgPyB0aGlzLmRhdGEgOiBudWxsLFxuICAgIH0pO1xuICB9XG59XG5pbnRlcmZhY2UgT3B0aW9ucyB7XG4gIGlkPzogc3RyaW5nO1xuICBpY29uTGVmdD86IHN0cmluZztcbiAgaWNvblJpZ2h0Pzogc3RyaW5nO1xuICBtYWluVGV4dD86IHN0cmluZztcbiAgc2Vjb25kYXJ5VGV4dD86IHN0cmluZztcbiAgaW1hZ1JpZ2h0Pzogc3RyaW5nO1xuICBpbWFnTGVmdD86IHN0cmluZztcbiAgYWx0SW1nPzogc3RyaW5nO1xufVxuIiwiPGRpdiBbaWRdPVwiY29tcG9uZW50SWRcIj5cbiAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJiYy1mbG9hdC1tZW51XCJcbiAgICBpZD1cIkJjRHJvcGRvd25fe3sgZHJvcGRvd25JZCB9fVwiXG4gICAgW25nQ2xhc3NdPVwie1xuICAgICAgJ2JjLWZsb2F0LW1lbnUtYXJyb3ctY2VudGVyJzogYXJyb3dDZW50ZXIsXG4gICAgICAnYmMtZmxvYXQtbWVudS1hcnJvdy1yaWdodCc6IGFycm93UmlnaHQsXG4gICAgICAnYmMtZmxvYXQtbWVudS1hcnJvdy1sZWZ0JzogYXJyb3dMZWZ0LFxuICAgICAgJ2JjLWZsb2F0LW1lbnUtcG9zaXRvbi1yaWdodCc6IHBvc2l0aW9uUmlnaHQsXG4gICAgICAnYmMtZmxvYXQtbWVudS1wb3NpdG9uLWxlZnQnOiBwb3NpdGlvbkxlZnRcbiAgICB9XCJcbiAgICBbYXR0ci53aWR0aF09XCJmbG9hdE1lbnVXaWR0aFwiXG4gICAgW2F0dHIuYXJpYS1hbmd1bGFyXT1cInRydWVcIlxuICA+XG4gICAgPGRpdlxuICAgICAgKm5nSWY9XCJhcnJvd0NlbnRlciB8fCBhcnJvd1JpZ2h0IHx8IGFycm93TGVmdFwiXG4gICAgICBjbGFzcz1cImJjLWZsb2F0LW1lbnUtYXJyb3dcIlxuICAgID48L2Rpdj5cbiAgICA8c2VjdGlvblxuICAgICAgY2xhc3M9XCJiYy1mbG9hdC1tZW51LWNvbnRlbnRcIlxuICAgICAgW25nQ2xhc3NdPVwieyAnYmMtZmxvYXQtbWVudS1zZWxlY3RlZC1pY29uJzogc2VsZWN0ZWRJY29uIH1cIlxuICAgICAgW2lkXT1cImRyb3Bkb3duSWRcIlxuICAgID5cbiAgICAgIDx1bD5cbiAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICpuZ0lmPVwiaGF2ZVByZWxvYWRlciAmJiBvcHRpb25zLmxlbmd0aCA9PT0gMDsgZWxzZSBkZWZhdWx0T3B0aW9uXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxsaVxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgcHJlbG9hZGVyTGlzdFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cIid0cnVlJ1wiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIidQcmVsb2FkZXInXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8YmMtcHJlbG9hZGVyIHR5cGU9XCJsaW5lXCIgW3dpZHRoXT1cImZsb2F0TWVudVdpZHRoXCI+PC9iYy1wcmVsb2FkZXI+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdE9wdGlvbj5cbiAgICAgICAgICA8bGlcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgJ2JjLWZsb2F0LW1lbnUtb3B0aW9uLWRpc2FibGVkJzogb3B0aW9uLmRpc2FibGVkID09ICdkaXNhYmxlZCcsXG4gICAgICAgICAgICAgICdiYy1mbG9hdC1tZW51LW9wdGlvbic6IG9wdGlvbi5kaXNhYmxlZCAhPSAnZGlzYWJsZWQnXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICpuZ0Zvcj1cImxldCBvcHRpb24gb2Ygb3B0aW9uc1wiXG4gICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0T3B0aW9uKCRldmVudCwgb3B0aW9uKVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cIm9wdGlvbi5kaXNhYmxlZCA/ICd0cnVlJyA6ICdmYWxzZSdcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgKm5nSWY9XCJvcHRpb24uaW1hZ2VuU3JjXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJiYy1pY29uXCJcbiAgICAgICAgICAgICAgc3JjPVwie3sgb3B0aW9uLmltYWdMZWZ0IH19XCJcbiAgICAgICAgICAgICAgYWx0PVwie3sgb3B0aW9uLmFsdEltZyB9fVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGVtICpuZ0lmPVwib3B0aW9uLmljb25MZWZ0XCIgY2xhc3M9XCJiYy1pY29uIGJjLXNtXCI+e3tcbiAgICAgICAgICAgICAgb3B0aW9uLmljb25MZWZ0XG4gICAgICAgICAgICB9fTwvZW0+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwicmFkaW9CdXR0b25zXCIgY2xhc3M9XCJiYy1mbG9hdC1tZW51LWlucHV0c1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmMtcmFkaW8tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJiYy1yYWRpby1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYmMtZmxvYXQtbWVudS1pbnB1dFwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCIxXCJcbiAgICAgICAgICAgICAgICAgICAgcm9sZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1jaGVja2VkPVwiZmFsc2VcIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmMtcmFkaW9cIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJjaGVja2JveFwiIGNsYXNzPVwiYmMtZmxvYXQtbWVudS1pbnB1dHNcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYmMtY29udGFpbmVyLWNoZWNrYm94XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImJjLWZsb2F0LW1lbnUtaW5wdXRcIlxuICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJjLWNoZWNrYm94XCI+PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YT5cbiAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJvcHRpb24ubWFpblRleHRcIiBjbGFzcz1cImJjLWZsb2F0LW1lbnUtbWFpbi10ZXh0XCI+e3tcbiAgICAgICAgICAgICAgICBvcHRpb24ubWFpblRleHRcbiAgICAgICAgICAgICAgfX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJvcHRpb24uc2Vjb25kVGV4dFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJiYy1mbG9hdC1tZW51LXNlY29uZGFyeS10ZXh0XCJcbiAgICAgICAgICAgICAgICA+e3sgb3B0aW9uLnNlY29uZFRleHQgfX08L3NwYW5cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPGVtICpuZ0lmPVwib3B0aW9uLmljb25SaWdodFwiIGNsYXNzPVwiYmMtaWNvbiBiYy1zbVwiPnt7XG4gICAgICAgICAgICAgIG9wdGlvbi5pY29uUmlnaHRcbiAgICAgICAgICAgIH19PC9lbT5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgKm5nSWY9XCJvcHRpb24uaW1hZ1JpZ2h0XCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJiYy1pY29uXCJcbiAgICAgICAgICAgICAgW3NyY109XCJvcHRpb24uaW1hZ1JpZ2h0XCJcbiAgICAgICAgICAgICAgYWx0PVwie3sgb3B0aW9uLmFsdEltZyB9fVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICA8L3VsPlxuICAgIDwvc2VjdGlvbj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==